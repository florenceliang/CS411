<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script type="text/javascript">


        function get_weather() {
            const city = document.getElementById('search_bar').value
            const endpoint = 'https://api.openweathermap.org/data/2.5/weather?q=' + city + '&appid=46298d85e7d4b0e1deefe4d6fcb4f839'
            console.log(endpoint)
            const request = new XMLHttpRequest();
            request.open("GET", endpoint, true);
            request.onload = function () {
                if (request.status == 404) {
                    alert("An unknown error has occured. Please make sure the city is spelled correctly. ex: newyork -> new york");
                } else {
                    const weather = JSON.parse(this.response);
                    var temp = (parseFloat(weather['main']['temp']) - 273.15) * 9/5 + 32
                    var feels_like = (parseFloat(weather['main']['feels_like']) - 273.15) * 9/5 + 32
                    document.getElementById('city_temp').innerHTML = 'The temperature for your city is ' + temp.toFixed(2).toString() + ' degrees Fahrenheit'
                    document.getElementById('feels_like').innerHTML = 'Feels like: ' + feels_like.toFixed(2).toString() + ' degrees Farenheit'
                    document.getElementById('wind_speed').innerHTML = 'Winds of ' + weather['wind']['speed'] + 'MPH'

                    }
                        };
                request.send();
            }


    </script>
</head>
<body>
    <h3> Choose your city for some weather </h3>
    <p> Search for your city:</p>
    <input type="text" placeholder="Search here..." id="search_bar"/>
    <input type="submit" onclick="get_weather()" />
    <p id="city_temp">  </p>
    <p id="feels_like">  </p>
    <p id="wind_speed"> </p>

</body>
</html>
